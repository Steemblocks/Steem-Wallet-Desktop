<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Steem Wallet - Desktop</title>

    <!-- Prevent light mode flash and preload logo -->
    <script>
      // Apply dark background immediately before render
      document.documentElement.style.backgroundColor = "hsl(222.2 84% 4.9%)";
      
      // Preload the logo image to prevent flash
      (function() {
        var img = new Image();
        img.src = '/steem-logo.png';
      })();
      
      // Suppress browser intervention messages in console
      (function() {
        var originalWarn = console.warn;
        var originalLog = console.log;
        console.warn = function() {
          var args = Array.prototype.slice.call(arguments);
          var message = args.join(' ');
          if (message.indexOf('[Intervention]') === -1) {
            originalWarn.apply(console, args);
          }
        };
        console.log = function() {
          var args = Array.prototype.slice.call(arguments);
          var message = args.join(' ');
          if (message.indexOf('[Intervention]') === -1) {
            originalLog.apply(console, args);
          }
        };
      })();
    </script>

    <!-- Tauri Desktop Application -->
    <!-- This is a desktop app, not a web application -->

    <!-- Premium Google Fonts - with display=swap for fast rendering -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Security: Content Security Policy -->
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self' ipc: tauri:; 
                   script-src 'self' 'wasm-unsafe-eval'; 
                   connect-src 'self' http://ipc.localhost https://ipc.localhost ipc: tauri: https: wss:; 
                   img-src 'self' https: data:; 
                   style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
                   font-src 'self' https://fonts.gstatic.com https://fonts.googleapis.com data:"
    />
  </head>
  <body>
    <div id="root">
      <!-- Instant loading indicator while React initializes -->
      <div
        id="initial-loader"
        style="
          min-height: 100vh;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          background: hsl(222.2 84% 4.9%);
          opacity: 1;
          transition: opacity 0.15s ease-out;
        "
      >
        <img
          src="/steem-logo.png"
          alt=""
          width="64"
          height="64"
          style="
            width: 64px;
            height: 64px;
            max-width: 64px;
            max-height: 64px;
            min-width: 64px;
            min-height: 64px;
            object-fit: contain;
            margin-bottom: 24px;
            animation: pulse 2s ease-in-out infinite;
            transform: translateZ(0);
            will-change: opacity, transform;
          "
        />
        <div
          style="
            width: 200px;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
          "
        >
          <div
            style="
              width: 30%;
              height: 100%;
              background: linear-gradient(90deg, #1a936f, #22c55e);
              border-radius: 4px;
              animation: loading 1.5s ease-in-out infinite;
            "
          ></div>
        </div>
        <style>
          @keyframes pulse {
            0%,
            100% {
              opacity: 0.7;
              transform: scale(1) translateZ(0);
            }
            50% {
              opacity: 1;
              transform: scale(1.05) translateZ(0);
            }
          }
          @keyframes loading {
            0% {
              width: 0%;
              margin-left: 0%;
            }
            50% {
              width: 60%;
              margin-left: 20%;
            }
            100% {
              width: 0%;
              margin-left: 100%;
            }
          }
          /* Smooth fade-out for initial loader */
          #initial-loader.fade-out {
            opacity: 0 !important;
            pointer-events: none;
          }
        </style>
      </div>
    </div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
